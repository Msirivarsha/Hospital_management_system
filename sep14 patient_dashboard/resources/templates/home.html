<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
    <title>Hospital Management System</title>
    <style>
        /* Basic styles for modal */
        .modal {
            display: none; 
            position: fixed; 
            z-index: 1000; 
            left: 0; top: 0; width: 100%; height: 100%; 
            overflow: auto; background-color: rgba(0,0,0,0.5);
        }
        .modal-content {
            background: white; margin: 10% auto; padding: 20px; width: 300px; border-radius: 5px;
        }
        .close-btn {
            cursor: pointer; float: right; font-size: 20px;
        }
        button { margin: 10px; padding: 10px 20px; }
    </style>
</head>
<body>

<h1>Welcome to Hospital Management System</h1>

<button id="patientBtn">Patient Login/Register</button>
<button id="doctorBtn" disabled>Doctor Login/Register (Coming Soon)</button>
<button id="adminBtn" disabled>Admin Login/Register (Coming Soon)</button>

<!-- Modal Dialog -->
<div id="authModal" class="modal">
    <div class="modal-content">
        <span id="closeModal" class="close-btn">&times;</span>

        <!-- Login form container -->
        <div id="loginForm">
            <h3>Patient Login</h3>
            <form th:action="@{/login}" method="post">
                <label>Username:<br/><input name="username" type="text" required /></label><br/><br/>
                <label>Password:<br/><input name="password" type="password" required /></label><br/><br/>
                <button type="submit">Login</button>
            </form>
            <p>New user? <a href="#" id="showRegister">Register here</a></p>
        </div>

        <!-- Registration form container (hidden initially) -->
        <div id="registerForm" style="display:none;">
            <h3>Patient Register</h3>
            <form th:action="@{/register}" method="post" th:object="${user}">
                <fieldset>
                    <legend>Login Details</legend>
                    <label>Username:<br/><input type="text" th:field="*{username}" required /></label><br/><br/>
                    <label>Password:<br/><input type="password" th:field="*{password}" required /></label><br/><br/>
                </fieldset>
                <fieldset th:object="${patient}">
                    <legend>Patient Details</legend>
                    <label>Name:<br/><input type="text" th:field="*{name}" required /></label><br/><br/>
                    <label>Date of Birth:<br/><input type="date" th:field="*{dateOfBirth}" required /></label><br/><br/>
                    <label>Gender:<br/>
                        <select th:field="*{gender}">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                        </select></label><br/><br/>
                    <label>Contact Number:<br/><input type="tel" th:field="*{contactNumber}" /></label><br/><br/>
                    <label>Address:<br/><input type="text" th:field="*{address}" /></label><br/><br/>
                    <label>Medical History:<br/><textarea th:field="*{medicalHistory}"></textarea></label><br/><br/>
                </fieldset>
                <button type="submit">Register</button>
            </form>
            <p>Already have an account? <a href="#" id="showLogin">Login here</a></p>
        </div>
    </div>
</div>

<script>
    const patientBtn = document.getElementById('patientBtn');
    const authModal = document.getElementById('authModal');
    const closeModal = document.getElementById('closeModal');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');
    const showRegister = document.getElementById('showRegister');
    const showLogin = document.getElementById('showLogin');

    patientBtn.onclick = () => {
        loginForm.style.display = 'block';
        registerForm.style.display = 'none';
        authModal.style.display = 'block';
    };

    closeModal.onclick = () => {
        authModal.style.display = 'none';
    };

    showRegister.onclick = (e) => {
        e.preventDefault();
        loginForm.style.display = 'none';
        registerForm.style.display = 'block';
    };

    showLogin.onclick = (e) => {
        e.preventDefault();
        registerForm.style.display = 'none';
        loginForm.style.display = 'block';
    };

    window.onclick = function(event) {
        if (event.target === authModal) {
            authModal.style.display = "none";
        }
    };
</script>
</body>
</html>
